<div ng-controller="playPositionCtrl" class="bg-e">
  <div class="row h-set3">
    <div class="col-sm-3 p-r-0 p-l-0">
      <div class="side-alert">
        <p class="hd" style="margin-left: -28px;">
          <a ng-model="timeHalf" class="wavesUrl waves-effect" ng-click="homePage()">Home</a>&nbsp;&nbsp;&nbsp;&nbsp;<span style="vertical-align:top;">></span>&nbsp;&nbsp;
          <a ng-model="timeHalf" class="wavesUrl waves-effect" ng-click="playBack()">Playback</a>&nbsp;&nbsp;&nbsp;&nbsp;<span style="vertical-align:top;">></span>&nbsp;&nbsp;
          <a ng-model="timeHalf" class="wavesUrl waves-effect" ng-click="">Position</a>
          &nbsp;&nbsp; <!-- {{playData.reg_no}} -->
        </p>
        <div class="side-inn">
          <p><b>Reg. No. :</b> {{playData.reg_no}}</p>
          <!-- <p><b>Total Distance :</b> {{totalDistance || '0'}} KM</p> -->
          <p><b>Total Distance :</b> {{playData.tot_dist || '0'}} KM</p>
          <p><b>Distance Running :</b> {{runningDistance || '0'}} KM</p>
          <p><b>Speed :</b> {{speedChange || '0'}} KM/hr</p>
          <p><b>Date :</b> {{dateChange || firstLocation.start_time}}</p>
          <div class="bxxx">
            <div class="col-sm-2">
              <img src="img/start.png">
            </div>
            <div class="col-sm-10">
              <p>{{firstLocation.start_addr}}</p>
              <p>{{firstLocation.start_time}}</p>
            </div>
            <div class="col-sm-2">
              <img src="img/stop.png">
            </div>
            <div class="col-sm-10">
              <p>{{lastLocation.stop_addr}}</p>
              <p>{{lastLocation.end_time}}</p>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="ply" ng-show="!showDiv">
            <div class="col-sm-2">
              <a href="" ng-show="showPlay" class="play" ng-click="play()">
                <span class="glyphicon glyphicon-play-circle" aria-hidden="true"></span>
              </a>
              <a href="" ng-show="showStop" class="pause" ng-click="stopFight()">
                <span class="glyphicon glyphicon-pause" aria-hidden="true"></span>
              </a>
            </div>
            <div class="col-sm-10">
              <rzslider rz-slider-model="slider.value" rz-slider-options="slider.options" tooltip="Speed Controller"></rzslider>
            </div>
            <div class="clearfix"></div>
          </div>
          <!-- <div>
            <span><input type="checkbox" ng-model="showIcon" ng-change = "showLandmarks(showIcon)">&nbsp; Show Landmarks</span>
            &nbsp;&nbsp;
          </div> -->
          <div class="btns" ng-show="!showDiv">
            <a href="" ng-click="showLandmarks()" class="btn btn-normal"><span class="glyphicon glyphicon-flag">&nbsp;Icons</span></a>&nbsp;
            <a href="" ng-click="line()" class="btn btn-normal"><span class="glyphicon glyphicon-resize-horizontal">&nbsp;Draw Route</span></a>&nbsp;
            <a href="" ng-click="resetFight()" class="btn btn-normal"><span class="glyphicon glyphicon-repeat">&nbsp;Reset</span></a>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-9 p-l-0" style="background: #fff;">
      <div class="search_play">
        <div class="col-sm-2" style="padding-top: 5px;padding-bottom: 5px;">
          <div class="input-group input-group-sm inn" >
            <div class="date-picker input-group dp-blue" ng-class="{ 'is-opened': opened1 == true }" style="width: 100%;">
              <div class="" ng-class="{ 'fg-toggled': opened1 == true }" >
                <input ng-click="open($event, 'opened1')" type="text" class=" " uib-datepicker-popup="{{format}}" show-weeks="false" ng-model="start_date_cal" is-open="opened1" datepicker-options="dateOptions1" ng-required="true" close-text="Close" placeholder="By start date " ng-change="getNotifi();toggleMinMaxDate()" style="width: 95%; border: none; padding: 6px;">
              </div>
            </div>
          </div>
        </div>
        <label style="margin-top: 10px;" class="pull-left">HH</label>
        <div class="col-sm-1">
          <div class="select">
            <select ng-model="hourSel1" ng-options="sAlert as sAlert for sAlert in aHours" class="form-control">
            </select>
          </div>
        </div>
        <label style="margin-top: 10px;" class="pull-left">MM</label>
        <div class="col-sm-1">
          <div class="select">
            <select ng-model="minuteSel1" ng-options="sAlert as sAlert for sAlert in aMinutes" class="form-control">
            </select>
          </div>
        </div>
        <div class="col-sm-2 " style="padding-top: 5px;padding-bottom: 5px;padding-left: 0px;">
          <div class="input-group input-group-sm inn" >
            <div class="date-picker input-group dp-blue" ng-class="{ 'is-opened': opened2 == true }" style="width: 100%;">
              <div class="" ng-class="{ 'fg-toggled': opened2 == true }" >
                <input ng-click="open($event, 'opened2')" type="text" class=" " uib-datepicker-popup="{{format}}" show-weeks="false" ng-model="end_date_cal" is-open="opened2" datepicker-options="dateOptions2" ng-required="true" close-text="Close" placeholder="By end date " ng-change="getNotifi();toggleMinMaxDate()" style="width: 95%;border: none; padding: 6px;" >
              </div>
            </div>
          </div>
        </div>
        <label style="margin-top: 10px;" class="pull-left">HH</label>
        <div class="col-sm-1">
          <div class="select">
            <select ng-model="hourSel2" ng-options="sAlert as sAlert for sAlert in aHours" class="form-control">
            </select>
          </div>
        </div>
        <label style="margin-top: 10px;" class="pull-left">MM</label>
        <div class="col-sm-1">
          <div class="select">
            <select ng-model="minuteSel2" ng-options="sAlert as sAlert for sAlert in aMinutes" class="form-control">
            </select>
          </div>
        </div>
        <div class="col-sm-1 " style="padding-top: 5px;padding-bottom: 5px;">
          <a href="" ng-click="inPlayBack()" class="btn btn-normal">Submit</a>
        </div>
        <div class="col-sm-1 " style="padding-top: 5px;padding-bottom: 5px;">
          <a ng-click="showDiv = !showDiv;toggle = !toggle;showInList();" class="btn btn-normal"><span class="glyphicon " ng-class="{'glyphicon-road': showDiv, 'glyphicon-th-list': !showDiv}"></span> {{toggleText}}</a>
        </div>
        <div class="col-sm-1" style="padding-top: 10px;padding-left: 50px;">
          <a uib-tooltip="Download CSV" class="pointer"
            tooltip-placement="bottom" ng-click="downloadCsv(aPlayPosiData)">
              <i class="zmdi zmdi-download zmdi-hc-fw f25"></i>
          </a>
        </div>
        <!-- <div class="col-sm-1" style="padding-top: 5px;padding-bottom: 5px;">
          <input type="checkbox"
            ng-model ="showIcon"
            ng-change = "showLandmarks(showIcon)" 
          >
        </div> -->
      </div>
      <div class="toggle-map" id="map-togg2">
        <div class="paly-map labelsss" style="height:540px;margin-bottom:0px;margin-top: 0!important;color: #fff;">
          <div class="col-md-12" style="width:100%;height:500px;border:1px solid" id="playMap"></div>
        </div>
      </div>
      <div class="toggle-table2" ng-show="showDiv">
        <div class="table-responsive" style="min-height: 500px;height: 450px;">
          <table class="table table-condensed">
            <thead>
              <tr>
                  <th>Start Time</th>
                  <th>End Time</th>
                  <th>Location</th>
                  <th>Latitude</th>
                  <th>Longitude</th>
                  <th>Nearest Landmark</th>
                  <th>Speed(Kmph)</th>
                  <th>Duration(Hour)</th>
                  <th>Distance(Kms)</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="list in aPlayPosiData" ng-if="aPlayPosiData.length>0">
                  <td>{{list.start_time || "NA"}}</td>
                  <td>{{list.end_time || "NA" }}</td>
                  <td>
                    <a href="" ng-click="viewOnMap(list)">{{(list.addr ? list.addr : list.start_addr) || "NA" }}</a>
                  </td>
                  <td>{{list.start && list.start.latitude || "NA" }}</td>
                  <td>{{list.start && list.start.longitude || "NA" }}</td>
                  <td>{{list.nearest_landmark && list.nearest_landmark.name && list.nearest_landmark.dist ? list.nearest_landmark.dist/1000 + " KM from " + list.nearest_landmark.name : "NA"}}</td>
                  <td>{{list.top_speed || "0" }}</td>
                  <td>{{list.duration || "0" }}</td>
                  <td>{{list.distance || "0" }}</td>
              </tr>
              <tr ng-if="aPlayPosiData.length < 1">
                <td colspan="4"> Play data not available !!!</td>
              </tr>
                
            </tbody>
          </table>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>
  </div>
</div>
<style type="text/css">
  section.main{width: 100%;float: none;margin: 0;}
  #map.togg2{display: block;}
  .toggle-table2{
    float: left;
    width: 100%;
    background: #fff;
  }
  ul.dropdown-menu{
    z-index: 999;
  }
</style>
