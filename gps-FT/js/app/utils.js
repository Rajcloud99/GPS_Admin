/**
 * Created by ajay on 11/3/2017.
 */


materialAdmin.factory('utils', function($rootScope, $http, $uibModal, $localStorage, GoogleMapService, gpsAnalyticService) {
	var utils = {
		sayHello: function() {
			return "Hello Ajju ..... ";
		},

		calTimeDiffCurrentToLastInDHM : function (lastDateTime) {
			var pos_date = lastDateTime;
			var cur_date = new Date();
			var diff = Math.abs(cur_date.getTime() - new Date(pos_date).getTime());
			var day = undefined, hour = undefined, halt_duration = '';
			var totalMin = (diff / 60000);
			var min = totalMin % 60;
			var totalHour = totalMin / 60;
			if (totalHour > 24) {
				hour = totalHour % 24;
				day = totalHour / 24;
			} else if (totalHour > 1) {
				hour = totalHour;
			}
			if (day) {
				halt_duration = parseInt(day) + 'd ';
			}
			if (hour) {
				halt_duration = halt_duration + parseInt(hour) + 'h ';
			}
			halt_duration = halt_duration + parseInt(min) + 'm';
			//$rootScope.aTrSheetDevice[j].stoppage_time = halt_duration;
			return halt_duration;
		},

		convertSecondsInToHour : function (seconds) {
			seconds = seconds/3600;
			var hour = seconds.toFixed(2);
			return hour;
		},

		convertMeterInToKM : function (meter) {
			meter = meter/1000;
			var KM = meter.toFixed(2);
			return KM;
		}
	};

    //var oColourStatus = {"running":"#15e425","stopped":"red","offline":"grey"};
    utils.setColor = {"running": "#15e425", "online": "#15e425", "stopped": "red", "offline": "grey"};
    function getSVG(status, icon) {
        var sColor = utils.setColor[status]?utils.setColor[status]:"grey";
        //var svgCode = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" style="" xml:space="preserve" width="49.636" height="49.636"><rect id="backgroundrect" width="100%" height="100%" x="0" y="0" fill="none" stroke="none"/> <g class="currentLayer" style=""><title>Layer 1</title><polygon style="" points="31.164264678955078,26.56472873687744 8.163265228271484,22.70972728729248 57.79926681518555,-0.07027208805084229 33.799264907836914,48.34572887420654 " id="svg_1" class="" transform="rotate(-135.31655883789062 32.981266021728516,24.137727737426754) " fill="'+ sColor +'" fill-opacity="1"/><g id="svg_2" class=""> </g><g id="svg_3" class=""> </g><g id="svg_4" class=""> </g><g id="svg_5" class=""></g><g id="svg_6" class=""></g><g id="svg_7" class=""></g><g id="svg_8" class=""></g><g id="svg_9" class=""></g><g id="svg_10" class=""></g><g id="svg_11" class=""></g><g id="svg_12" class=""></g><g id="svg_13" class=""></g><g id="svg_14" class=""></g><g id="svg_15" class=""></g><g id="svg_16" class=""></g></g></svg>';
        var svgCode = utils.takeIcon(icon, sColor);
        return 'data:image/svg+xml;charset=UTF-8;base64,' + btoa(svgCode);
    }
    var GpsGaadiIcon = L.Icon.extend({
        options: {
            iconSize:     [50, 50],
            shadowSize:   [25, 25],
            iconAnchor:   [10, 0],
            shadowAnchor: [4, 15],
            popupAnchor:  [-3, -70]
        }
    });

    utils.initializeMapView = function (mapId,mapConfig,showCluster) {
        mapConfig = mapConfig || {
            zoomControl: true,
            hybrid: true,
            zoom: 5,
            search:false,
            location:false,
            center: new L.LatLng(21, 90)
        };
        var map = new MapmyIndia.Map(mapId, mapConfig);
        var obj = {
            map : map
        };
        if(showCluster){
            obj.clusterL = utils.initializeCluster(map);
        }
        return obj;
    };


    utils.initializeCluster = function (map) {
        var markerClusterLayer = new PruneClusterForLeaflet();
        var markersLayer = new L.LayerGroup([markerClusterLayer]);	//layer contain searched elements

        map.addLayer(markersLayer);
        return markerClusterLayer;
    };

    utils.getAddress = function (info, callback) {
        if (info.start && info.start.latitude && info.start.longitude) {
            var lat = info.start.latitude;
            var lng = info.start.longitude;
        } else {
            var lat = info.lat;
            var lng = info.lng;
        }

        var searchValue = {lat:lat,lon:lng};
        gpsAnalyticService.getAddress(searchValue,success,failure);

        function success(response){
            console.log(response);
            info.formatedAddr = response.display_name;
            callback();
        }
        function failure(response){
            console.log(response);
            info.formatedAddr = response.statusText;
        }

        //var latlngUrl = "http://52.220.18.209/reverse?format=json&lat="+lat+"&lon="+lng+"&zoom=18&addressdetails=0";
        // var latlngUrl = "http://3.6.84.38:4242/reverse?lat=" + lat + "&lon=" + lng;
        // $http({
        // 	method: "GET",
        // 	url: latlngUrl
        // }).then(function mySucces(response) {
        // 	info.formatedAddr = response.data.display_name;
        // 	callback();
        // }, function myError(response) {
        // 	info.formatedAddr = response.statusText;
        // });
    };

    utils.addOnCluster = function (mapObj, marker, obj) {
        var a = obj;
        a = utils.prepareData(a); //// prepare data for 'ac' and 'acc' status
        a.rotationAngle = a.course || 90;
        var title = a.reg_no;

        mapObj.clusterL.RegisterMarker(marker);

        //set custom marker icon
        mapObj.clusterL.PrepareLeafletMarker = function (marker, data) {
            var popupText = $('<div class="map-popup">'+
                '<p>Vehicle No.: <span>' + data.reg_no+ '</span></p>'+
                '<p ng-if="a.acc_high_local">ACC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;: <span>' + data.acc_high_local+ '</span></p>'+
                '<p>Speed &nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;: <span>'+ data.speed +' &nbsp;&nbsp;KM/H. </span></p>'+
                '<p ng-show="a.ac_local" id="acId" class="acClass">AC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;: <span>' + data.ac_local+ '</span></p>'+
                '<p>Location &nbsp;&nbsp;&nbsp;: <span>'+data.addr + '</span></p>'+
                '<p>Status &nbsp;&nbsp;&nbsp;: <span>'+data.status + '</span></p>'+
                '<p>Location Time &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span>'+ moment(data.location_time).format('LLL') +'</span></p>'+
                '<p>Last Seen &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span>'+ moment(a.datetime).format('LLL') +'</span></p>'+
                '<p>Positioning Time &nbsp;&nbsp;&nbsp;: <span>'+ moment(data.positioning_time || data.location_time).format('LLL') +'</span></p>'+
                '<p ng-show="a.driver_name">Driver &nbsp;&nbsp;&nbsp;: <span>'+ a.driver_name +'</span></p><hr class="m-t-5 m-b-5">'+
                '<p ng-show="a.driver_mobile">Driver No &nbsp;&nbsp;&nbsp;: <span>'+ a.driver_mobile +'</span></p><hr class="m-t-5 m-b-5">'+
                '<p ng-if="a.NearLandMark">Nearest Landmark &nbsp;&nbsp;&nbsp;: <span>'+ data.NearLandMark +'</span></p><hr class="m-t-5 m-b-5">'+
                '<a href="/#!/mains/mapZoom/'+ data.imei +'" uib-tooltip="Tracking" title="Tracking"><span class="glyphicon glyphicon-road"></span></a>&nbsp;&nbsp;&nbsp;'+
                '<a class="'+data.imei+'" id="createLandmark" title="create landmark" uib-tooltip="create landmark"><span class="glyphicon glyphicon-map-marker"></span></a>&nbsp;&nbsp;&nbsp;'+
                '<a class="'+data.imei+'" id="createGeofence11" title="create Geofence" uib-tooltip="create Geofence"><span class="glyphicon glyphicon-globe"></span></a>&nbsp;&nbsp;&nbsp;'+
                '</div>');
            marker.setIcon(L.icon({
                iconUrl: getSVG(data.status, data.icon),
                iconSize: [21, 32]
            }));
            //tooltip on mouseover
            marker.bindTooltip(data.reg_no,{permanent:false,direction:'top'}).openTooltip().on('click',function (e) {
                console.log("marker click....",e.toString());
            });
            marker.bindPopup(popupText[0]);
        };
        mapObj.map.addLayer(mapObj.clusterL);
        //fit map bound
        //mapObj.clusterL.FitBounds();

        //ProcessView function must be

        mapObj.clusterL.ProcessView();
    };

    utils.createMarker = function (obj) {
        var a = obj;
        a = utils.prepareData(a); //// prepare data for 'ac' and 'acc' status
        a.rotationAngle = a.course || 90;
        var marker = new PruneCluster.Marker(a.lat,a.lng); //create prune cluster marker
        marker.data = a;
        return marker;
    };

    function saveInfo (dt) {
        $rootScope.maps.map.closePopup();
		$rootScope.globalDataForLandmark = dt;
		var modalInstance = $uibModal.open({
			templateUrl: 'views/main/landPopMap.html',
			controller: 'crtLandCtrl'
		});
	}
	
	utils.prepareData = function (info) {
		if(info.acc_high === true){
			info.acc_high_local = "On";
		}else if(info.acc_high === false){
			info.acc_high_local = "Off";
		}else if(info.acc_high === undefined){
			info.acc_high_local = "NA";
		}

		if(info.ac_on === true){
			info.ac_local = "On";
		}else if(info.ac_on === false){
			info.ac_local = "Off";
		}else if(info.ac_on === undefined){
			info.ac_local = "NA";
		}
		return info;
	};

	utils.prepareCluster = function (mapObj, allMarkers) {
        mapObj.clusterL.addLayers(allMarkers);
        mapObj.map.addLayer(mapObj.clusterL);
	};

	utils.lineMarkerSvg = function (color) {
		//return '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" style="" xml:space="preserve" width="49.636" height="49.636"><rect id="backgroundrect" width="100%" height="100%" x="0" y="0" fill="none" stroke="none"/> <g class="currentLayer" style=""><title>Layer 1</title><polygon style="" points="23.164264678955078,36.56473159790039 0.16326522827148438,32.7097282409668 49.79926681518555,9.929727554321289 25.79926300048828,58.34572982788086" id="svg_1" class="" transform="rotate(-44.91157150268555 24.981266021728523,34.13772583007813) " fill="' + color + '" fill-opacity="1"/><g id="svg_2" class=""> </g><g id="svg_3" class=""> </g><g id="svg_4" class=""> </g><g id="svg_5" class=""></g><g id="svg_6" class=""></g><g id="svg_7" class=""></g><g id="svg_8" class=""></g><g id="svg_9" class=""></g><g id="svg_10" class=""></g><g id="svg_11" class=""></g><g id="svg_12" class=""></g><g id="svg_13" class=""></g><g id="svg_14" class=""></g><g id="svg_15" class=""></g><g id="svg_16" class=""></g></g></svg>';
		return '<svg enable-background="new 0 0 32 32" height="32px" id="Layer_1" version="1.1" viewBox="0 0 32 32" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M18.221,7.206l9.585,9.585c0.879,0.879,0.879,2.317,0,3.195l-0.8,0.801c-0.877,0.878-2.316,0.878-3.194,0  l-7.315-7.315l-7.315,7.315c-0.878,0.878-2.317,0.878-3.194,0l-0.8-0.801c-0.879-0.878-0.879-2.316,0-3.195l9.587-9.585  c0.471-0.472,1.103-0.682,1.723-0.647C17.115,6.524,17.748,6.734,18.221,7.206z" fill="'+color+'"/></svg>';
	};

    utils.takeIcon = function (ico, iColor) {
        var svgCode;
        //var svgCode = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" style="" xml:space="preserve" width="49.636" height="49.636"><rect id="backgroundrect" width="100%" height="100%" x="0" y="0" fill="none" stroke="none"/> <g class="currentLayer" style=""><title>Layer 1</title><polygon style="" points="23.164264678955078,36.56473159790039 0.16326522827148438,32.7097282409668 49.79926681518555,9.929727554321289 25.79926300048828,58.34572982788086" id="svg_1" class="" transform="rotate(-44.91157150268555 24.981266021728523,34.13772583007813) " fill="#15e425" fill-opacity="1"/><g id="svg_2" class=""> </g><g id="svg_3" class=""> </g><g id="svg_4" class=""> </g><g id="svg_5" class=""></g><g id="svg_6" class=""></g><g id="svg_7" class=""></g><g id="svg_8" class=""></g><g id="svg_9" class=""></g><g id="svg_10" class=""></g><g id="svg_11" class=""></g><g id="svg_12" class=""></g><g id="svg_13" class=""></g><g id="svg_14" class=""></g><g id="svg_15" class=""></g><g id="svg_16" class=""></g></g></svg>';
        if(ico === "bike") {
            svgCode = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n' +
                '          viewBox="0 0 152.1 151.7" style="enable-background:new 0 0 152.1 151.7;" xml:space="preserve">\n' +
                '              <style type="text/css">\n' +
                '      .st0{fill:' + iColor + ';}\n' +
                '      .st1{fill:#FFFFFF;}\n' +
                '      </style>\n' +
                '          <path class="st0" d="M63.7,149.6l4.5-0.1c0,0,1.3,1.8,3.1,2.1s4.8,0.1,4.8,0.1l4.8-0.1c1.8-0.4,3.1-2.1,3.1-2.1l4.5,0.1\n' +
                '          c0,0-1.7,2.5,1.9,2.6s3-1.4,2.9-3s-1.2-2.4-2.5-2.6c-1.3-0.2-2.3,1.9-2.3,1.9s-3.4,0-4,0s2.1-5.8,2.7-8.4c0.6-2.6,0.9-7.3,1-10.8\n' +
                '          c0.1-3.4-0.8-16.3-0.6-17.2c0.2-1,9.3-11.2,8.8-12.7c-0.5-1.5-0.1-2.7,0.5-4.5s2.8-7.2,3.6-8s0.4-5.4,0.2-6.8\n' +
                '          c-0.1-1.4-1.1-4-0.7-5.7c0.4-1.8,1.2-3.8,1.2-3.8s3.8-1.2,4.7-2.4s-1.1-4.7-1.1-4.7s2.3-0.7,3-0.4c0.7,0.3,3,0.7,3.2,0\n' +
                '          c0.2-0.7,1.3,0,1.3,0s0.4-0.8,0-1.7c-0.4-0.9-5.6,0-5.6,0s-0.7-0.2-0.7-1.5c-0.1-1.3-0.4-1.5-1.2-1.9c-0.7-0.4-2.6-2.3-3.3-3.2\n' +
                '          s-2.2-2.9-2.9-2.9c-0.7,0.1-2.6,1.6-2.1,2.1c0.5,0.4,1,2,0.6,2.2c-0.4,0.2-0.7-0.3-2.9-4.3c-2.3-4-4.7-6.8-5.8-7.3\n' +
                '          c-1.1-0.5-3.2,0.1-3.3-0.4c-0.1-0.5,0.2-1.3,1.5-1.6s7.1,2.2,12.4,3.2c5.3,1,6.8-2.3,7-3.5c0.1-1.2-13.5-11.4-13.5-11.4\n' +
                '          s0.2-0.2,0-1.8c-0.2-1.5-2.1-2.6-3.9-2.6c-1.8,0-2.3-1.2-2.3-1.2s-0.2-7.6-0.5-8.2s-3.2-0.5-3.2-0.5s-0.4-9.1-0.4-9.7\n' +
                '          C82.2,6,81.1,6,81.1,6s0-3.2-1-4.7c0,0-1.1-1.3-4.1-1.2c0,0-3.2-0.2-4.1,1.2C71,2.7,71,6,71,6S69.9,6,69.8,6.6\n' +
                '          c-0.1,0.6-0.4,9.7-0.4,9.7s-2.9-0.1-3.2,0.5S65.6,25,65.6,25s-0.5,1.2-2.3,1.2s-3.7,1-3.9,2.6c-0.2,1.5,0,1.8,0,1.8\n' +
                '          S45.8,40.9,46,42.1c0.1,1.2,1.7,4.5,7,3.5c5.3-1,11.2-3.4,12.4-3.2s1.5,1.1,1.5,1.6c-0.1,0.5-2.2-0.1-3.3,0.4\n' +
                '          c-1.1,0.5-3.5,3.4-5.8,7.3c-2.3,4-2.6,4.5-2.9,4.3c-0.4-0.2,0.1-1.8,0.6-2.2c0.5-0.4-1.4-2-2.1-2.1c-0.7-0.1-2.2,1.9-2.9,2.9\n' +
                '          s-2.6,2.9-3.3,3.2c-0.7,0.4-1.1,0.6-1.2,1.9c-0.1,1.3-0.7,1.5-0.7,1.5s-5.2-0.9-5.6,0c-0.4,0.9,0,1.7,0,1.7s1.1-0.7,1.3,0\n' +
                '          c0.2,0.7,2.6,0.3,3.2,0s3,0.4,3,0.4s-2,3.6-1.1,4.7s4.7,2.4,4.7,2.4s0.8,2.1,1.2,3.8c0.4,1.8-0.5,4.3-0.7,5.7\n' +
                '          c-0.1,1.4-0.6,5.9,0.2,6.8s3,6.2,3.6,8s1,3,0.5,4.5c-0.5,1.5,8.6,11.7,8.8,12.7c0.2,1-0.7,13.8-0.6,17.2c0.1,3.4,0.4,8.2,1,10.8\n' +
                '          c0.6,2.6,3.3,8.4,2.7,8.4s-4,0-4,0s-1-2.1-2.3-1.9c-1.3,0.2-2.4,1-2.5,2.6s-0.7,3.1,2.9,3C65.4,152.1,63.7,149.6,63.7,149.6z\n' +
                '          M53.6,67.6c-0.5-0.8-0.1-1.5-0.2-3.3s-1-1.6-0.8-2.1s1.5-0.1,2-0.5c0.5-0.3,2.3-3.2,2-4.1c-0.2-0.8-0.6-0.5-0.3-1.3\n' +
                '          s6.9-10.2,7.5-10.6s2.8,0,2.8,0s1.6,2.5,0,2.5c-1.6,0-6,3.2-7.2,5.4c-1.2,2.2-0.3,5.5-0.3,6.2S58,60,56.7,60.6\n' +
                '          C55.4,61.2,55,69,55,69S54.1,68.4,53.6,67.6z M95.1,60.6c-1.3-0.6-2.4,0-2.4-0.8s0.8-4-0.3-6.2c-1.2-2.2-5.6-5.3-7.2-5.4\n' +
                '          c-1.6,0,0-2.5,0-2.5s2.2-0.4,2.8,0s7.2,9.8,7.5,10.6s-0.1,0.5-0.3,1.3c-0.2,0.8,1.6,3.8,2,4.1c0.5,0.3,1.7-0.1,2,0.5\n' +
                '          s-0.8,0.3-0.8,2.1s0.3,2.5-0.2,3.3c-0.5,0.8-1.4,1.4-1.4,1.4S96.4,61.2,95.1,60.6z"/>\n' +
                '          <path class="st1" d="M70.7,24.1c1.1-1,4.2-1.4,4.2-1.4h2.9c0,0,3.1,0.4,4.2,1.4c1.1,1-4.2,0-4.2,0H75C75,24.1,69.6,25.1,70.7,24.1z"\n' +
                '              />\n' +
                '              <circle class="st1" cx="77.2" cy="43.2" r="1.2"/>\n' +
                '              <circle class="st1" cx="87.4" cy="59.5" r="2.8"/>\n' +
                '              <circle class="st1" cx="64.4" cy="59.5" r="2.8"/>\n' +
                '              <circle class="st1" cx="76.6" cy="53.5" r="3.4"/>\n' +
                '              <path class="st1" d="M70.1,137c-2.8-0.4-4.7-3.6-5.5-4.9s-0.1-4.7,0-6s1.5-3.5,2.7-6.7c1.2-3.1-0.4-7.2-0.4-7.2s-1.5-2.8,0.5-1.4\n' +
                '          s8.6,1.4,8.6,1.4c3.9-0.1,8.2-1.4,8.2-1.4c2-1.5,0.5,1.4,0.5,1.4s-1.6,4.1-0.4,7.2c1.2,3.1,2.6,5.3,2.7,6.7s0.9,4.7,0,6\n' +
                '          s-2.8,4.5-5.5,4.9l-5.6,0.3c0,0-0.1,0-0.2,0C75.1,137.4,72.5,137.4,70.1,137z"/>\n' +
                '          <path class="st1" d="M76.9,79.2c-7.3,0-13.2,6.3-13.2,14s5.9,14,13.2,14s13.2-6.3,13.2-14S84.2,79.2,76.9,79.2z M76.7,83.9\n' +
                '          c-5.6,0.1-9.4,2.9-9.4,2.9c1.9-3.4,5.5-5.7,9.7-5.7c3.8,0,7.2,1.9,9.2,4.9C86.1,85.9,82.3,83.8,76.7,83.9z"/>\n' +
                '          <g>\n' +
                '          </g>\n' +
                '          <g>\n' +
                '          </g>\n' +
                '          <g>\n' +
                '          </g>\n' +
                '          <g>\n' +
                '          </g>\n' +
                '          <g>\n' +
                '          </g>\n' +
                '          <g>\n' +
                '          </g>\n' +
                '          </svg>';
        }else if(ico === "person"){
            svgCode = '<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 199.27 199.27" style="enable-background:new 0 0 199.27 199.27;" xml:space="preserve"><g><path fill="' + iColor + '" d="M99.568,47.971c13.225,0,23.983-10.76,23.983-23.984C123.552,10.76,112.793,0,99.568,0S75.584,10.76,75.584,23.986C75.584,37.211,86.344,47.971,99.568,47.971z M99.568,15c4.953,0,8.983,4.031,8.983,8.986c0,4.954-4.03,8.984-8.983,8.984c-4.954,0-8.984-4.03-8.984-8.984C90.584,19.031,94.614,15,99.568,15z"/><path fill="' + iColor + '" d="M122.951,152.469v-23.484c5.331-4.412,8.5-10.99,8.5-18.059v-33.23c0-12.935-10.522-23.457-23.455-23.457H91.273c-12.934,0-23.455,10.522-23.455,23.457v33.23c0,7.069,3.168,13.646,8.497,18.059l0.003,23.487c-21.235,1.914-49.852,7.371-49.852,22.886c0,22.759,60.975,23.912,73.197,23.912c12.213,0,73.139-1.153,73.139-23.912C172.803,159.833,144.187,154.379,122.951,152.469z M99.664,184.27c-30.98,0-50.509-5.23-56.713-8.891c4.187-2.426,14.889-6.021,33.37-7.837l0.001,7.814c0.001,4.143,3.359,7.5,7.501,7.499c4.143-0.001,7.5-3.359,7.499-7.501l-0.008-50.328c0-2.771-1.528-5.315-3.973-6.618c-2.79-1.486-4.523-4.354-4.523-7.482v-33.23c0-4.663,3.793-8.457,8.455-8.457h16.723c4.662,0,8.455,3.794,8.455,8.457v33.23c0,3.127-1.734,5.994-4.527,7.482c-2.445,1.304-3.973,3.849-3.973,6.619v50.328c0,4.143,3.357,7.5,7.5,7.5s7.5-3.357,7.5-7.5v-7.816c18.495,1.813,29.198,5.413,33.376,7.84C150.141,179.038,130.63,184.27,99.664,184.27z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>';

        }else if(ico === "child"){
            svgCode = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n' +
                '                  viewBox="0 0 269.3 269.3" style="enable-background:new 0 0 269.3 269.3;" xml:space="preserve">\n' +
                '                      <style type="text/css">\n' +
                '              .st0{fill:none;stroke:#494949;stroke-miterlimit:10;}\n' +
                '              .st1{fill:' + iColor + ';stroke:#494949;stroke-miterlimit:10;}\n' +
                '              </style>\n' +
                '                  <g id="Layer_x0020_1">\n' +
                '                      <rect class="st0" width="269.3" height="269.3"/>\n' +
                '                      <g id="_4955610640">\n' +
                '                      <path class="st1" d="M64.1,118.1c-1.6,3.7-2.5,4.6-2.8,9.7c-0.3,3.9,0,8.1,0.5,12c0.6,4.9,2.5,16.7,4.6,20.1\n' +
                '                  c4.8,7.9,15,15.8,23.8,19.2c1.4,0.5,3.2,0.9,4.5,1.7c1.3,0.2,14.5,3.9,15.5,4.3c3.1,0.5,6.7,1.6,10,2.3c3.5,0.7,7,1.4,10.7,2\n' +
                '                  c8,1.3,14.9,2.1,23.2,2.3c3.5-0.3,5.5-0.6,8.3-1.8c1.3-0.5,2.2-1,3.4-1.6c1.2-0.7,2-1.4,3.4-2l5.6-4.7c2-1.9,3.1-3.2,5.2-5.2\n' +
                '                  l7.5-8.2c5.8-6.2,11-13.4,15.8-20.6c2.2-3.3,4.1-4.4,3.8-7.1c-1.1-0.9-7.8-7.4-8.7-9c-1.4-2.6-1.5-9.5-6.9-11.1\n' +
                '                  c-2.3,0-3.5,0.7-4.9,1.8c-1.5,1.1-2.2,1.6-3.9,2.5c-2.9,1.6-5.1,3.7-6.9,5.9c-2.3,1.6-3.7,4.5-6.1,5.4c0.6,3.6,0.6,7.7-0.1,11.1\n' +
                '                  l-0.8,4c3.1,0.9,5.8,4.3,3.1,5.5c-1.3,0.6-3.3,0.1-4.6-0.1l-0.9,0c-1,3.1-4.9,7.8-6.7,9.4c-23.8,21.3-63.3,3.9-65.7-25\n' +
                '                  c2.3-3.6,2-7.1,0.1-8.2l0.2,0.1l0-0.9l0.5-1.9c-0.1-1.1-0.9-1.4-1.5-2.8c-1.1-1.4-2.6-1.6-2.2-4c-1.2-1.4-2.6-4.6-3.1-6.7\n' +
                '                  c-2.8-4.7-1.8-2.3-4-4.7c-6.5-0.1-8.1-1.8-16.2,3.5c-1,0.7-1.4,0.9-2.1,1.6C65.1,117.4,64.7,118,64.1,118.1z"/>\n' +
                '                  <path class="st1" d="M111.3,107.8c-2.1,0.9-6,4.6-8,6.5l-0.7,1.1c0.3,1.5,0.6,0.8-0.8,1.1c0.1,0.1,0.3,0.1,0.4,0.2\n' +
                '                  c0.1,0.1,0.2,0.1,0.3,0.2c1.1,0.9-0.6-1.1,0.5,0.4c1.1,1.5,0.2-0.2,0.1,0.7c0,0.1-0.3,1-0.3,2l-2.4-0.1c-0.8-0.3-0.7,0.1-0.9-0.4\n' +
                '                  c-0.1-0.1-0.2-0.1-0.3-0.1l-1.7,3.3l-2.1,5.4l-0.6,1.9l-0.5,1.9c-0.6,4.6-0.4,8.2-0.4,8.2l0.1,0.8c2.4,28.9,41.9,46.3,65.7,25\n' +
                '                  c1.8-1.6,5.7-6.3,6.7-9.4l0.9,0l-0.5-0.6c0.3-0.9,0.7-1.7,1-2.6c0.4-1.2,0.3-1.4,1-2.2l0.8-4c-0.3-7.1,0.3-9.8-1.8-16.3\n' +
                '                  c-1.6-4.8-4-8.1-6.5-11.3c-4.6-5.7-19-12.6-24.5-8.1l-0.7-1.2c-0.9-2.4-1.4-4.1-4.5-5.7c-4.5-2.6-5.6-2.3-11.1-1.1\n' +
                '                  C118,104.1,112.6,106.4,111.3,107.8z"/>\n' +
                '                  <path class="st1" d="M98.7,33.4L98.5,34l-0.9,0.1c0.9,3.1,2.8,12.2,1.8,14.7c3.6-0.4,3.8,2.4,0.6,2.5c1,3-0.1,5.8-0.8,9\n' +
                '                  c-0.6,2.6-1.3,5.7-1.9,8.1c0.7,0,0.3-0.2,1,0.1c0.6,0.3,0.3,0.1,0.6,0.6c2.8-0.9,18.5-5.4,20.2-4.8c0.9,3.9-7.1,2.6-11.1,5.1\n' +
                '                  l43.3,0.2c0.1-2-0.1-4.9,1-6.1c1.2,1.1,1.1,4.3,1,6.3l1.4-0.3c2.5-4.1,4.6-4.7,10.8-4.8c0.1-3.6,1.6-8.8,2.9-11.7\n' +
                '                  c0.7-1.5,1.8-3.5,3.4-4c2.6-0.8,3.2,1.2,4.6,2.2c0-7.1,1-13.2-4-16.7c-3.8-2.7-13.7-1.7-19.1-1.7c-6.8,0-37.5-0.4-41.5,0.1l4.8,1\n' +
                '                  c4.3,0.7,2.9,2.5,1.6,2.7c-1.3,0.3,0.9,0-0.6,0.1c-0.4,0-1.1-0.1-1.5-0.2l-7.7-1.4C105.5,34.7,101.7,34.2,98.7,33.4z"/>\n' +
                '                  <path class="st1" d="M51.2,29.4c-1.3,2.7-1.8,7.5-2.3,10.7c-1.3,7.5-2,7,0.8,9.9c-4,2.4-2.6,3.5-1.2,10c0.8,3.7,1.4,8.2,2.9,11.3\n' +
                '                  c2.9,1.2,2.2,1.2,6.1,1.2c2.3,0,4.7,0,7,0c4.7,0,9.8,0.2,14.4-0.1c-1-2.2-5.2-1.2-4.5-4.8c1.5-0.8,1.8-0.3,3.4-0.2\n' +
                '                  c-1.8-3.4-5.4-3.4-3.3-7.3c2-0.3,3.6,0.9,4.2,1.9l0.5-0.1c-1-2-4.6-6.7-0.1-7.7c3.1-0.7,4.6,4.5,4.6,7.3c0.3-2.8-0.2-6.3,0.2-8.8\n' +
                '                  c0.5-2.6,3.2-3.6,5.5-1.9c2.3,1.8,1.7,3.3,1,6.3c-0.8,3.6-0.3,5-0.3,8.2c0.7,0.9,0.6,1.2,0.9,2.4c0.4,2.7,1.1,3.5,2.9,4.6\n' +
                '                  c1.6-0.4,1.7-0.7,2.8-1.3l0.8-1.7l0-1c0.6-2.5,1.3-5.6,1.9-8.1c0.7-3.1,1.8-6,0.8-9l-1.6-0.9l-0.8-0.4l0.7-0.5l1-0.7\n' +
                '                  c1-2.6-0.9-11.6-1.8-14.7v-0.8l-0.5-2.6l-0.6-1.4c-3.1-2.2-6-1.5-10.7-1.5H61.4C56.9,27.8,54,27,51.2,29.4z"/>\n' +
                '                  <path class="st1" d="M166.1,64.8l0.1,1.2c2.7,1.4,4.8,0.1,5.9,3.4l0.1,0.4c0.9,2,0.7,8.2-0.6,9.6l-0.5,0.7\n' +
                '                  c-1.4,2.7-5.7,2.6-6.5,3.7c-0.2,2.6,0.3,1.6,1.2,3.2l0.6,0.6c1.1,0.6,1.2,1.2,2.9,1.7c1.4,0.4,2.7,0.4,4.1,0.2\n' +
                '                  c2.4-0.4,4.4-2.4,6.4-1.8c6.3,5.6,15.1,18.1,18,25.5c-1,1-2.8,2.3-4,3.3c-1.4,1.2-2.4,2.6-3.5,3.6l1.3,0.5\n' +
                '                  c5.4,1.5,5.5,8.5,6.9,11.1c0.9,1.6,7.6,8.1,8.7,9c1,0,0.7,0.1,2.3-1.8c0.7-0.9,1.4-1.4,2.1-2.2c4-4.9,8.7-9.1,10.3-16.2\n' +
                '                  c2.6-11.1-6.4-18.3-11.8-23l-4.5-4.6c-1.4-1.5-3.1-3.4-4.5-4.9c-3.5-3.6-6.9-5.9-8.8-9.9l-0.8-2l-1-3l-0.3-0.9l-2-5.3\n' +
                '                  c-1.7-1.4-0.1-2.3-3.7-2.1c-0.8-2.4-1.2-2.9-4.2-2.5c-0.2-0.6-0.4-0.9-0.7-1.4c-1.2-1-2.1-1.5-4.1-0.6c-2.1,0.9-0.6-0.4-3.6-0.1\n' +
                '                  C169.2,60.5,167,63,166.1,64.8z"/>\n' +
                '                  <path class="st1" d="M79.1,61.9c0.5,0.6-0.1-0.8,0.5,0.6c0.4,1.1,0.1,0-0.2,0.5c-0.9-0.7-0.4-0.4-0.8-1.1c-0.6-1-2.2-2.2-4.2-1.9\n' +
                '                  c-2.1,3.9,1.5,3.9,3.3,7.3c-1.6-0.1-1.9-0.6-3.4,0.2c-0.7,3.6,3.6,2.6,4.5,4.8l0.1,1.4c-0.3,2.2-3.5,7.8-4.6,10.4\n' +
                '                  c-1.7,3.7-3.1,6.7-4.4,10.7c-1.6,4.9-5.4,16.6-6.1,22c-0.2,1.7-0.4,1,0.3,1.2c0.6-0.1,1-0.7,1.6-1.3c0.7-0.7,1.2-0.9,2.1-1.6\n' +
                '                  c8.1-5.4,9.7-3.7,16.2-3.5l0.8-0.2c0.2-6.6,2-8.1,4.2-15.4c5.3-18.1,2-17.1,11.9-14.7c3.1,0.8,6-0.4,6-3.3c0-1.8-2.9-4.5-4.3-5.1\n' +
                '                  c-3-1.2-4,0.4-6.1,0.6c-0.3,0.1-1,0-1.4-0.1c-1-0.3-0.3,0.3-1-0.5c-0.1-0.1-0.3-0.5-0.4-0.7c-1.8-1-2.5-1.9-2.9-4.6\n' +
                '                  c-0.2-0.3-0.1,0.1-0.4-0.7c-0.1-0.1-0.1-0.4-0.2-0.5c-0.1-0.5-0.1-0.7-0.2-1.2c0-3.3-0.5-4.6,0.3-8.2c0.7-3.1,1.3-4.5-1-6.3\n' +
                '                  c-2.2-1.8-5-0.7-5.5,1.9c-0.5,2.5,0.1,6-0.2,8.8c-0.1-2.8-1.5-8-4.6-7.3C74.5,55.2,78.1,59.9,79.1,61.9z"/>\n' +
                '                  <path class="st1" d="M145.5,220.5c-2.8,5.6-6.5,12.5-1.2,17.5c4,3.8,9.8,7.1,16.5,3.2c5.6-3.2,7-7.6,8-15.8\n' +
                '                  c0.5-3.7,3.1-18.9,2.7-21.1c-1.3-3.5-2.4-7-6.6-7.9c-4.8-0.9-8.4,0.9-10.8,3.3c-4.5,4.7,0.5,10.9-5.2,16.8\n' +
                '                  C148.3,217.4,145.9,220.3,145.5,220.5z"/>\n' +
                '                  <path class="st1" d="M95.3,205.3c0.2,2.9,1.7,6.1,2.3,9.6c2.1,10.9,1.9,19.4,11.2,24.4c2.5,1.3,6,2.9,9.3,1.7c2.4-0.8,5.8-3.6,7-5\n' +
                '                  c4.7-5.5,2.5-10.3-1.7-17c-1.1-0.7-1-1.1-2.2-1.8c-3.3-2.3-5.1-2.4-6-5.4c-1.3-4.3,0.3-9.7-2.5-12.9c-2.2-2.6-7.1-4.2-11.6-2.9\n' +
                '                  C97.3,197.1,96.1,200.8,95.3,205.3z"/>\n' +
                '                  <path class="st1" d="M148.9,108.5c9.6,5.2,18.5,13.9,20.8,27.5c2.4-0.9,3.8-3.9,6.1-5.4c-1-1.2-0.7-4.7-3.1-9.7\n' +
                '                  C165.7,105.8,150.8,106.6,148.9,108.5z"/>\n' +
                '                  <path class="st1" d="M154.8,69.5l-0.9,3.5l-0.1,3.4c1.2,2.8,0.7,4,3,6c1.8,1.5,4,2,7,2.2l0.8-0.8c0.8-1.2,5-1,6.5-3.7\n' +
                '                  c-12.8,0.8-11.8-12.5,1-10.6c-1.1-3.2-3.1-1.9-5.9-3.4l-0.1-1.2l-0.5-0.1C159.4,64.8,157.3,65.4,154.8,69.5z"/>\n' +
                '                  <path class="st1" d="M88,116.4c0.5,2.1,1.8,5.3,3.1,6.7c2-1.9,3.7-0.9,6.4-0.5l1.7-3.3l2.3-3.1c0.4-0.5,0.2-0.3,0.5-0.6l0.5-0.3\n' +
                '                  l0.7-1.1c2-1.9,5.9-5.6,8-6.5c-1.6-2.5-10.2-1.5-14.3,0.5c-2.7,1.3-5.3,3.5-7.2,5.9C89.2,114.9,88.8,115.7,88,116.4z"/>\n' +
                '                  <path class="st1" d="M95.4,198.9c1.9-2.2,2.8-4.1,6.3-5.1c1.7-0.5,3.6-0.5,5.5-0.3c2.5,0.3,2.9,0.9,4.6,1.4\n' +
                '                  c-0.2-1.8-0.3-3.3-0.5-5c-0.2-2-0.9-3.2-1-4.7c-1-0.5-14.2-4.1-15.5-4.3c0.4,1.3,0.9,2.8,1.1,4.1c0.2,1.4,0,3.2,0.1,4.8\n' +
                '                  C96.3,193.9,95.8,195.2,95.4,198.9z"/>\n' +
                '                  <path class="st1" d="M169.7,147.1c0.7-3.5,0.7-7.6,0.1-11.1c-2.3-13.6-11.3-22.3-20.8-27.5c-2.6-1.2,0.1-2.4-2.1-3.8\n' +
                '                  c-1.2-0.7-2-0.3-2.9,0.4l-0.8,0.7c-3-0.6-4-1.2-8.3-1.9c-3.5-0.5-2.8-0.2-3.1,0.5c3.1,1.6,3.7,3.3,4.5,5.7l0.7,1.2\n' +
                '                  c5.4-4.5,19.9,2.4,24.5,8.1c2.5,3.1,4.9,6.5,6.5,11.3C169.9,137.3,169.4,140.1,169.7,147.1z"/>\n' +
                '                  <path class="st1" d="M165.6,64.7l0.5,0.1c0.9-1.8,3.1-4.3,5.7-4.5c3-0.3,1.5,1,3.6,0.1c2-0.9,2.9-0.4,4.1,0.6\n' +
                '                  c0.7-2.5-2.5-7.5-2.9-9.7c-1.4-0.9-2.1-3-4.6-2.2c-1.6,0.5-2.7,2.5-3.4,4C167.2,55.9,165.7,61.2,165.6,64.7z"/>\n' +
                '                  <path class="st1" d="M166.2,88.2c0.4,3.9,3.1,12.3,6.9,12c3.7-0.2,6.4-8.2,6.7-12.6c-2-0.7-4,1.3-6.4,1.8\n' +
                '                  c-1.4,0.3-2.7,0.2-4.1-0.2c-1.6-0.5-1.8-1.1-2.9-1.7L166.2,88.2z"/>\n' +
                '                  <path class="st1" d="M95.4,198.9c-1.2,2.7-0.8,3.7-0.1,6.3c0.8-4.5,2-8.1,5.9-9.2c4.6-1.4,9.4,0.3,11.6,2.9\n' +
                '                  c2.7,3.2,1.1,8.6,2.5,12.9c0.9,3,2.7,3.1,6,5.4c1.1,0.7,1,1.2,2.2,1.8c-3.5-6.6-5.2-2.6-7.7-16c-0.2-1-0.4-2.3-0.7-3.3\n' +
                '                  c-0.3-1-1-1.8-1.1-2.6c-0.5-0.3-0.2-0.2-0.6-0.5c-0.1-0.1-0.4-0.4-0.5-0.5c-0.6-0.6-0.5-0.5-0.9-1.1c-1.7-0.5-2.1-1.1-4.6-1.4\n' +
                '                  c-1.9-0.2-3.8-0.2-5.5,0.3C98.2,194.9,97.3,196.7,95.4,198.9z"/>\n' +
                '                  <path class="st1" d="M154.1,191.7l0.1,3.5l0,1.2c3.2-1.3,4.6-2.8,9.5-2.1c4.4,0.7,5.2,2.8,7.4,4.7c-1.8-3.6-1.6-8.6-1.9-12.9\n' +
                '                  c-1.4,0.6-2.2,1.3-3.4,2c-1.2,0.7-2.1,1.1-3.4,1.6C159.6,191.1,157.6,191.4,154.1,191.7z"/>\n' +
                '                  <path class="st1" d="M154.2,196.5c-1.1,1.9-2.2,2.3-2.8,5.3c-0.5,2.2-0.9,4.8-1.4,7c-0.9,4.3-2.8,7.9-4.5,11.7\n' +
                '                  c0.4-0.2,2.8-3.2,3.4-3.8c5.7-6,0.7-12.2,5.2-16.8c2.4-2.5,6-4.3,10.8-3.3c4.2,0.9,5.3,4.3,6.6,7.9c0.1-0.1,0.1-0.3,0.1-0.3\n' +
                '                  c0,0,0.1-0.2,0.1-0.3c0,0,0.3-0.7,0.1-2.3c-0.1-1-0.5-1.6-0.8-2.5c-2.2-1.9-3-4-7.4-4.7C158.8,193.6,157.4,195.2,154.2,196.5z"/>\n' +
                '                  <path class="st1" d="M51.2,29.4c2.8-2.4,5.7-1.6,10.2-1.6h24.3c4.7,0,7.6-0.7,10.7,1.5l-1.2-2.4c-2.4-0.4-0.1-0.6-5.2-0.6h-30\n' +
                '                  C55.9,26.4,52,25.4,51.2,29.4z"/>\n' +
                '                  <path class="st1" d="M98.9,69.1l-1.6,0.3l-0.8,1.7l-0.4,1.2l12-2.9c3.9-2.5,11.9-1.2,11.1-5.1C117.4,63.7,101.7,68.2,98.9,69.1z"\n' +
                '                      />\n' +
                '                      <path class="st1" d="M171.1,80l0.5-0.7c-6.6-2.6-5.4-8.4,0.6-9.6l-0.1-0.4C159.3,67.5,158.3,80.8,171.1,80z"/>\n' +
                '                      <path class="st1" d="M97.6,33.3l1.1,0.1c3,0.7,6.8,1.2,9.9,1.8l7.7,1.4c0.4,0.1,1.1,0.2,1.5,0.2c1.5,0-0.7,0.2,0.6-0.1\n' +
                '                  c1.3-0.2,2.7-2-1.6-2.7l-4.8-1c-3.9,0.1-10.7-1.8-14.9-2.3L97.6,33.3z"/>\n' +
                '                  <path class="st1" d="M78.9,73.8l-0.1-1.4c-4.7,0.2-9.7,0.1-14.4,0.1c-2.3,0-4.7,0-7,0c-3.9,0-3.2,0-6.1-1.2\n' +
                '                  c0.7,2.4,2.2,2.6,4.7,2.6c2.6,0,5.1,0,7.7,0C68.3,73.9,74.5,74.3,78.9,73.8z"/>\n' +
                '                  <path class="st1" d="M171.6,79.3c1.3-1.4,1.5-7.5,0.6-9.6C166.2,71,165,76.8,171.6,79.3z"/>\n' +
                '                      <path class="st1" d="M122.7,48.9c-1.2,0.7-0.7,1.9,0.2,2.2c0.6,0.2,3,0.1,3.9,0.1c1.4,0,6.8,0.3,7.7-0.3c0.8-0.5,0.6-1.6-0.2-2\n' +
                '                  C133.6,48.6,123.7,48.3,122.7,48.9z"/>\n' +
                '                  <path class="st1" d="M118.3,49.1c-0.3-0.1-15.1-2-12.4,1.7c0.9,1.1,5.5,0.5,7.2,0.5C115.9,51.3,119.1,52.2,118.3,49.1z"/>\n' +
                '                      <path class="st1" d="M138.7,48.8c-0.9,3.4,3,2.4,6.1,2.4c2.9,0,7.3,1,6.3-2.2C149.3,48.3,141.3,48.7,138.7,48.8z"/>\n' +
                '                      <path class="st1" d="M155,50.6c1.4,1.1,3.8,0.7,6.2,0.7c2.3,0,5.2,0.4,6.5-0.6l-0.1-1.7c-1.7-0.5-5.1-0.3-7.1-0.3\n' +
                '                  C158.1,48.7,154.7,47.8,155,50.6z"/>\n' +
                '                  <path class="st1" d="M91.1,123.1c-0.4,2.4,1.1,2.6,2.2,4l2.1,0.9l2.1-5.4C94.9,122.3,93.1,121.3,91.1,123.1z"/>\n' +
                '                      <path class="st1" d="M167.4,156.5c1.2,0.2,3.3,0.7,4.6,0.1c2.8-1.2,0-4.6-3.1-5.5c-0.6,0.7-0.6,0.9-1,2.2c-0.3,0.9-0.7,1.7-1,2.6\n' +
                '                  L167.4,156.5z"/>\n' +
                '                  <path class="st1" d="M151.4,69.6l0.2,3.5c0,0,0.2,0.5,0.3,0.6c0.5,0.5,0,0.1,0.6,0.5c0.9-0.6,0.3,0,1-1.2l0-3.2\n' +
                '                  c0.1-2,0.3-5.2-1-6.3C151.3,64.7,151.5,67.6,151.4,69.6z"/>\n' +
                '                  <path class="st1" d="M188.2,66.9l2,5.3l0.8,0.3l0.3,0.6h1.3c-0.1-1.6-0.4-3.2-0.9-4.6c-0.6-1.8-1.1-2.8-3.2-2.4\n' +
                '                  C188.3,66.5,188.3,66.4,188.2,66.9z"/>\n' +
                '                  <path class="st1" d="M178,175.9c4.1-2.1,12.3-16,11.5-18c-0.4,0.5-3.4,6.8-5.2,9.4C183.5,168.6,178.4,174.9,178,175.9z"/>\n' +
                '                      <path class="st1" d="M153.4,76.4l-1.8-0.3c-0.1,2.6-0.7,6.6,0.9,8.3c0.4-0.3,0.2,0,0.5-0.5c0.5-0.8,0.5-1.9,0.5-2.8\n' +
                '                  C153.6,79.5,153.5,78,153.4,76.4z"/>\n' +
                '                  <path class="st1" d="M114.8,117.9c0.8-0.4,3.6-4.5,11.7-1c3.1,1.3,1.4,0.3,2-0.3c-2.4-0.7-3.2-2-7.3-1.9\n' +
                '                  C118.3,114.7,115.3,115.4,114.8,117.9z"/>\n' +
                '                  <path class="st1" d="M136.9,161.2c1.1,0.4,14.4-3.4,15.4-4.3c-0.9-0.4-6.4,1.4-7.8,1.7C142.6,159.1,137.9,160,136.9,161.2z"/>\n' +
                '                      <path class="st1" d="M144.4,115.1c0.7,0.5,0.6,0.4,1.5,0.7c2.9,0.8,5.3,1.4,7.9,3.1c1.2,0.8,1.1,1.5,2.7,1.5c-0.1-1,0.2-0.9-2-2.3\n' +
                '                  c-2-1.4-3.8-1.9-6.3-2.7c-0.5-0.1-1.3-0.4-1.9-0.6C144.1,114.4,144.5,115,144.4,115.1z"/>\n' +
                '                  <path class="st1" d="M83.8,136.8L83.8,136.8l-0.1-1.1c-1.8,0.7-3.1,0.8-4.6,1.8c-3.2,2-8.6,6.4-9.9,9.3\n' +
                '                  C71.2,145.4,75.9,138.1,83.8,136.8z"/>\n' +
                '                  <path class="st1" d="M120.4,170.5c-0.5-0.9-4.3-4.1-5.1-4.8c-1-0.9-1.6-1.6-2.5-2.5c-0.5-0.5-0.9-0.7-1.3-1.3\n' +
                '                  c-0.8-1-0.2-0.8-1.4-1.3c0.7,2.5,6.1,7.1,8.6,9.2C119.3,170.2,119.4,170.3,120.4,170.5z"/>\n' +
                '                  <path class="st1" d="M191.5,76.1h1.2c1.3-0.4,2-0.3,2.7-1.3c-0.6-1.5,0.3-0.4-2.7-1.6h-1.3l-0.8-0.1L191.5,76.1z"/>\n' +
                '                      <path class="st1" d="M99.2,119.4c0.1,0.1,0.2,0,0.3,0.1c0.2,0.5,0.1,0.1,0.9,0.4l2.4,0.1c0-1,0.3-1.9,0.3-2c0.1-0.9,1,0.8-0.1-0.7\n' +
                '                  c-1.1-1.5,0.6,0.5-0.5-0.4c-0.1-0.1-0.2-0.2-0.3-0.2c-0.1-0.1-0.3-0.1-0.4-0.2c1.4-0.3,1.1,0.4,0.8-1.1l-0.5,0.3\n' +
                '                  c-0.3,0.3-0.1,0.1-0.5,0.6L99.2,119.4z"/>\n' +
                '                  <path class="st1" d="M104.4,140.3l-0.6-0.1c0.6,1.7,7.5,11.1,9.2,11.5C112.7,151.1,106.2,143.4,104.4,140.3z"/>\n' +
                '                      <path class="st1" d="M151.6,76.1l1.8,0.3l0.4,0l0.1-3.4l-0.5,0c-0.7,1.2,0,0.5-1,1.2c-0.6-0.4-0.1,0-0.6-0.5c0,0-0.3-0.6-0.3-0.6\n' +
                '                  c-1.2,0.7-0.9,0.3-1.5,1.3C150.3,75.7,150.6,75.5,151.6,76.1z"/>\n' +
                '                  <path class="st1" d="M100.9,213c0.2,0.1-0.4,1.9,2.7-0.3c5.1-3.7,3.1-2,6.3-4c0.4-0.2,0.4-0.3,0.6-0.5c-0.1-0.1-0.2-0.2-0.2-0.1\n' +
                '                  h-0.9c0,0-1.3,0.5-1.4,0.5C105,210,104.1,212.4,100.9,213z"/>\n' +
                '                  <path class="st1" d="M156,214.2c0.6,0.4,9.3,2.7,9.9,2.4c-1.4-1.4-7.7-2.7-9.1-2.6C156.2,214.1,156.3,214.1,156,214.2z"/>\n' +
                '                      <path class="st1" d="M98.4,49.5l0.1,0.9l1.6,0.9c3.2-0.1,3-2.9-0.6-2.5L98.4,49.5z"/>\n' +
                '                      <path class="st1" d="M124.1,171.9l10.2-1.3c-0.3-0.3,0.7-0.7-2.6-0.5c-0.9,0.1-1.9,0.2-2.8,0.3C127.2,170.6,125,171,124.1,171.9z"\n' +
                '                      />\n' +
                '                      <path class="st1" d="M147.3,145.8c1,1.6,5.9,2.9,7.5,2c-0.9-0.7-2.3-0.6-4-1.1C149.6,146.3,148.3,145.2,147.3,145.8z"/>\n' +
                '                      <path class="st1" d="M156.5,210.2l7.8,3.5c-0.3-1-0.1-0.8-1.4-1.5C161,211.3,157.8,209.5,156.5,210.2z"/>\n' +
                '                      <path class="st1" d="M100.1,210.9c0.1-0.1,0.2-0.2,0.2-0.1c0,0.1,0.1-0.1,0.2-0.2c0.5-0.4-0.2,0.1,0.3-0.3c0.6-0.5,0-0.1,0.7-0.6\n' +
                '                  c0.5-0.3,1-0.7,1.6-1.1c1.1-0.6,2.5-0.9,3.6-1.7l-0.4-0.2c-0.1,0-1.9,0.2-3.6,1.1C101.3,208.7,100.1,209.2,100.1,210.9z"/>\n' +
                '                  <path class="st1" d="M77.8,107.5c0.8,0.4,1.9,0,3,0l2.9-0.1c0.7-0.1-0.1,0.5,0.9-0.5C82.8,105.8,79.1,106.4,77.8,107.5z"/>\n' +
                '                      <path class="st1" d="M199.2,112.2c1.2,0.2,5.3-0.7,6-1.7c-1-0.5-1.8-0.1-3,0.2C200.8,111.1,199.7,111,199.2,112.2z"/>\n' +
                '                      <path class="st1" d="M183.2,84.1l3.9-3.1c0.5-0.4,1-0.9,1.2-1.2C186.2,79.7,183.9,82.7,183.2,84.1z"/>\n' +
                '                      <polygon class="st1" points="153.5,69.8 153.4,73 153.9,73 154.8,69.5 \t\t"/>\n' +
                '                      <path class="st1" d="M80.8,72.7c2-2,2-0.8,4-2l-2.7-0.1C80.9,71.1,80.6,71.4,80.8,72.7z"/>\n' +
                '                      <path class="st1" d="M93.7,72.4c0.1,0.1,0.3,0.5,0.4,0.7l1.4,0.1l0.6-0.8l0.4-1.2C95.4,71.7,95.3,72,93.7,72.4z"/>\n' +
                '                      <path class="st1" d="M94.8,129.9l0.6-1.9l-2.1-0.9C93.9,128.6,94.8,128.8,94.8,129.9z"/>\n' +
                '                      <path class="st1" d="M177.5,63.8c-0.4-1.5-0.9-1.9-2.4-2.1c0.6,0.8,0.2,0.3,1,1C176.8,63.2,176.7,63.3,177.5,63.8z"/>\n' +
                '                      <path class="st1" d="M97.3,69.4l1.6-0.3c-0.3-0.5,0-0.3-0.6-0.6c-0.7-0.4-0.2-0.2-1-0.1L97.3,69.4z"/>\n' +
                '                      <polygon class="st1" points="192.3,78 192.6,76.1 191.5,76.1 \t\t"/>\n' +
                '                      <path class="st1" d="M79.1,61.9L78.6,62c0.4,0.7-0.1,0.3,0.8,1.1c0.3-0.5,0.6,0.6,0.2-0.5C79,61.1,79.6,62.5,79.1,61.9z"/>\n' +
                '                      <path class="st1" d="M182,65.3c0.5-0.7,0.8,0.5,0.4-0.7c-0.3-0.8-0.2-0.3-0.9-0.5L182,65.3z"/>\n' +
                '                      <polygon class="st1" points="83.8,136.8 84.4,136.6 84.4,135.6 83.8,135.7 \t\t"/>\n' +
                '                      <polygon class="st1" points="97.6,34.1 98.5,34 98.7,33.4 97.6,33.3 \t\t"/>\n' +
                '                      <path class="st1" d="M90.8,67.8c-0.3-1.2-0.1-1.5-0.9-2.4c0.1,0.4,0.1,0.7,0.2,1.2c0.1,0.1,0.1,0.4,0.2,0.5\n' +
                '                  C90.8,67.9,90.6,67.5,90.8,67.8z"/>\n' +
                '                  <polygon class="st1" points="190.5,73.1 191.3,73.2 191,72.5 190.2,72.2 \t\t"/>\n' +
                '                      <path class="st1" d="M166.2,88.2l0.3-0.7l-0.6-0.6c-0.1,1.1-0.3-0.1,0,0.8c0,0.1,0.1,0.2,0.1,0.3C166,88.1,166.1,88.2,166.2,88.2z\n' +
                '                  "/>\n' +
                '                  <polygon class="st1" points="98.5,50.4 98.4,49.5 97.7,49.9 \t\t"/>\n' +
                '                      </g>\n' +
                '                      </g>\n' +
                '                      </svg>';
        }else if(ico === "truck"){
            svgCode = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n' +
                '\t viewBox="0 0 269.3 269.3" style="enable-background:new 0 0 269.3 269.3;" xml:space="preserve">\n' +
                '<style type="text/css">\n' +
                '\t.st0{fill:none;stroke:#444444;stroke-miterlimit:10;}\n' +
                '\t.st1{fill:' + iColor + ';stroke:#444444;stroke-miterlimit:10;}\n' +
                '</style>\n' +
                '<g id="Layer_x0020_1">\n' +
                '\t<rect class="st0" width="269.3" height="269.3"/>\n' +
                '\t<path class="st1" d="M175.4,254.6H93.2V102.8h10.9c-0.9-4.1-1.5-0.5-9.7-2.6c-2.5-6.2-1-42.9-1.1-53.2l-10.5,2.5\n' +
                '\t\tc-1.9,0-1.3,0.4-1.2-1.6c3.8-3.7,8.8-5.6,12-8.4c0.8-14.5,2.5-20.3,17.7-22c1.1-0.1,3.4-0.2,4.3-0.4c4.6-1.1-2.7-1.6,13-1.6\n' +
                '\t\tc6.5,0,13.4-0.2,19.7,0.1l1.1,1.7l5.7,0.4c13.4-0.3,15.2,6.3,17.7,13.9c2.2,6.6,0.5,6.9,6,9.8c3.9,2.1,6.7,3.9,8.9,6.7\n' +
                '\t\tc0.1,1.9,0.5,1.4-1.3,1.4l-10.6-2.6c0.1,6.7,1.3,45.2-0.2,50.3c-1.6,5.4-6.1,3.1-9.3,3.7c-3.3,0.6-1.8-1.2-2.6,2h11.6V254.6z\n' +
                '\t\t M156.9,19.4c-0.1,3.6,2.8,5.8,5,7.2c2.7,1.9,5.1,4,8.3,4.5C170.2,24,164,19.7,156.9,19.4z M110,19.6c-7.5-0.4-13,4.5-13.3,11.6\n' +
                '\t\tC101.6,30.1,110.4,24.1,110,19.6z M172.5,86.5l-8.9,0c0,8.4,0.9,9.9,8.9,10.3L172.5,86.5z M105.8,87.8l-2.9-0.2l-2.3,0l-3.9,0.1\n' +
                '\t\tl0,10.3C105.3,97.9,105.5,96.1,105.8,87.8z M96.8,44.1l-0.2,5.2l0,18.9v4.5v6.1l0,6.3h9.6C106.2,66.2,108.9,54.6,96.8,44.1z\n' +
                '\t\t M172.8,43c-12,6.8-10.5,29.7-9.4,40.9l9.2,0L172.8,43z M168.5,38c-7.9-4.7-60.2-5.4-69.2-0.6c0,1.9,6.2,15.2,10.3,15.2\n' +
                '\t\tc1.5,0,9.1-1.1,11.5-1.4c4.3-0.5,12.7-4.8,22.8-0.7c3.4,1.4,8.4,1.1,12.2,1.7c6.2,0.9,5.6-0.8,8.2-5.2\n' +
                '\t\tC166,44.1,168.6,41.4,168.5,38z"/>\n' +
                '</g>\n' +
                '</svg>';

        }else if(ico === "bus"){
            svgCode = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n' +
                '\t viewBox="0 0 269.3 269.3" style="enable-background:new 0 0 269.3 269.3;" xml:space="preserve">\n' +
                '<style type="text/css">\n' +
                '\t.st0{fill:none;stroke:#565656;stroke-miterlimit:10;}\n' +
                '\t.st1{fill:' + iColor + ';stroke:#565656;stroke-miterlimit:10;}\n' +
                '\t.st2{fill:#FFFFFF;stroke:#565656;stroke-miterlimit:10;}\n' +
                '</style>\n' +
                '<g id="Layer_x0020_1">\n' +
                '\t<rect class="st0" width="269.3" height="269.3"/>\n' +
                '\t<path class="st1" d="M96.9,248.6l7.7-0.5l-0.5,9.8c13.1,1.7,16.9,2.2,30.7,2.2c6.2,0,25.4-0.3,30.5-2.3l-0.5-9.8l7.7,0.5V57.2\n' +
                '\t\tc-0.1-0.1,0.1-0.2-0.6-0.5c-0.9-0.3-0.1-0.8-0.8,0.2c0.7,3.1-0.2,8.8-0.2,12.3l-0.1,2.3c-0.3,4.8-0.6,9.6-0.8,14.3\n' +
                '\t\tc-0.1,2.2-0.2,4.8-0.6,6.9c-0.5,2.6-1.2,3.1-4,3.3c-1.2-4.1-0.4-17.5,0-22.4c0.1-1.1,0.1-2.4,0.5-3.3c0-2.2,1.6-13,2.6-14.1\n' +
                '\t\tc0.8-0.5,0.3-0.3,1.6-0.3c-0.9-0.7-0.8-0.4-1-1.2c-0.8-3.3,2.8-1.6,3.4-1.4c0-7.7,0.7-20.4-0.7-26.8c-1.1-1.4-1.4-1.3-2.5-2.3\n' +
                '\t\tc-2.1,4.5-7.5,2.2-9.8-0.6c-2-2.4-4.8-5.9-5.8-10.1l0.1-0.2c-8.6-3.1-24.6-3.1-34.1-1.1l-4,1.4c0,1.7-1.5,4-2.4,5.4\n' +
                '\t\tc-0.5,0.7-1,1.7-1.5,2.4c-5.4,7.5-10.9,5.8-11.5,2.7c-1.4,1.1-1.6,1-2.6,2.3c-0.5,2.2-0.7,3.8-0.7,6.3c0,2.4-0.3,4-0.3,6.6\n' +
                '\t\tc0,4.6,0,9.3,0,13.9c0.4-0.1,4.5-2.2,3.7,1.4c-0.3,1.1,0,0.5-1.1,1.1c1.2,0.1,0.9-0.2,1.7,0.4c1,0.9,2.6,12,2.6,14.3\n' +
                '\t\tc0.4,0.9,0.4,1.9,0.5,3.1c0.2,4.5,1.2,18.8-0.1,22.3c-2.7-0.1-3.5-0.8-4-3.3c-0.5-2.7-1.4-19-1.2-20.9l-0.2-2.6\n' +
                '\t\tc0-3.7-0.9-9-0.2-12.4c-0.7-0.9,0.1-0.5-0.8-0.1c-0.3,0.1-0.5,0.3-0.7,0.5c-0.5,2-0.2,42.2-0.2,47.8c0,46.8,0.2,93.9,0,140.7\n' +
                '\t\tC96.6,247.2,96.8,247.5,96.9,248.6z M106.1,69.7c1,0.3,11.6-1.1,13.6-1.3c10.3-0.9,19.4-1,29.8,0c2.1,0.2,12.9,1.6,13.9,1.4\n' +
                '\t\tc0.8-4.8,1.8-9.5,2.7-14.3c0.9-4.7,1.9-11.1-1.8-13.6c-4.4-3-23.5-4.7-29.5-4.7c-6.3,0-24.9,1.6-29.6,4.7\n' +
                '\t\tc-3.7,2.4-2.6,8.9-1.8,13.4C104.2,60.2,105.3,64.8,106.1,69.7z"/>\n' +
                '\t<path class="st1" d="M106.4,74.4l0.1-1.4c-0.1-0.7-0.2-1.4-0.3-2.1c2.8-1.4,26.3-2.4,28.5-2.4c6,0,23,1,28.4,2.3\n' +
                '\t\tc-0.1,6.8-0.7,19.4-0.4,26.3c0.1,1.7-0.2,1,0.6,1.4c0.5-0.3,0.5,0.3,0.4-2.2l0.2-19c0.2-7.8,1.1-11.9,2.5-19.4c1.1-6,3-14.1-2-16.9\n' +
                '\t\tc-3.3-1.8-13.8-3.4-18-3.9c-11.8-1.4-28.3-0.6-39.5,3.1c-6.7,2.3-5.6,9.2-4.2,16c1.2,5.8,2.2,10.3,2.8,16.2\n' +
                '\t\tC105.6,73.8,105.4,74,106.4,74.4z M106.1,69.7c1,0.3,11.6-1.1,13.6-1.3c10.3-0.9,19.4-1,29.8,0c2.1,0.2,12.9,1.6,13.9,1.4\n' +
                '\t\tc0.8-4.8,1.8-9.5,2.7-14.3c0.9-4.7,1.9-11.1-1.8-13.6c-4.4-3-23.5-4.7-29.5-4.7c-6.3,0-24.9,1.6-29.6,4.7\n' +
                '\t\tc-3.7,2.4-2.6,8.9-1.8,13.4C104.2,60.2,105.3,64.8,106.1,69.7z"/>\n' +
                '\t<path class="st1" d="M100.2,24.2c-0.6-1.8,0.9-3.6,1.6-4.7c0.9-1.4,1.8-2.2,3.5-3.1c3.1-1.8,6.3-2.6,10.4-2.6l4-1.4\n' +
                '\t\tc9.5-2,25.5-2,34.1,1.1l-0.1,0.2c4.6,0.3,6.9,0.7,10.5,2.8c1.6,0.9,2.5,1.7,3.4,2.9c1.2,1.6,1.8,2.5,1.8,4.9c1.2,1,1.4,0.9,2.5,2.3\n' +
                '\t\tc0.8-0.4,0.5-0.9,0.1-2.9c-0.9-4.3-2.2-9.1-5.8-11.8c-4.3-3.2-24.7-4.1-31.4-4.1c-9.5,0-18.2,0.5-26,2.3c-4.5,1-6.5,1.8-8.4,5.6\n' +
                '\t\tc-0.9,1.8-1.5,3.1-2,5.1l-1,4.3c-0.1,1.3,0.1,1.2,0.4,1.5C98.6,25.2,98.8,25.3,100.2,24.2z"/>\n' +
                '\t<path class="st1" d="M172.5,248.6l-7.7-0.5l0.5,9.8c-5.1,2-24.3,2.3-30.5,2.3c-13.8,0-17.5-0.5-30.7-2.2l0.5-9.8l-7.7,0.5\n' +
                '\t\tc-0.2,0.3-0.1,0-0.2,0.6c-0.2,1,0.1,1.4,0.2,2.1c0.9,7.8,4.9,8.6,12.7,9.5c4.2,0.5,8.8,0.7,13.5,0.8h11.4h12.5l0.2,0\n' +
                '\t\tc2-0.2,3.8-0.2,6.1-0.2l11.4-1.3c3.4-0.7,6-2.1,7.2-5.5C172.6,252.3,172.5,251.5,172.5,248.6z"/>\n' +
                '\t<path class="st1" d="M115.6,13.7c-4.1,0.1-7.3,0.9-10.4,2.6c-1.7,1-2.6,1.8-3.5,3.1c-0.7,1.1-2.2,2.9-1.6,4.7\n' +
                '\t\tc0.6,3.1,6.1,4.7,11.5-2.7c0.5-0.7,1.1-1.7,1.5-2.4C114.1,17.7,115.6,15.4,115.6,13.7z"/>\n' +
                '\t<path class="st1" d="M169.3,24.2c0-2.4-0.6-3.3-1.8-4.9c-0.9-1.3-1.8-2-3.4-2.9c-3.6-2.1-5.9-2.5-10.5-2.8c1,4.2,3.8,7.7,5.8,10.1\n' +
                '\t\tC161.8,26.4,167.2,28.8,169.3,24.2z"/>\n' +
                '\t<path class="st1" d="M114.3,34c1.1,0.4,16.2-0.9,17.6-1.6l-0.2-4.4c-3.3-0.1-7.6,0.6-10.9,0.9c-6.1,0.5-6-0.1-6.3,2.4\n' +
                '\t\tC114.2,32.4,113.9,33.2,114.3,34z"/>\n' +
                '\t<path class="st1" d="M170.4,200.8v-0.9l-7.1-0.1l0-16.5l7.1,0l0-0.9c-2-0.3-5.1-0.3-7.1,0.1l0-16.6c2.3,0.5,4.8,0.3,7.1,0.1v-0.9\n' +
                '\t\tc-2.3-0.3-4.8-0.3-7.1,0.1l0-17c2.2,0.4,4.9,0.4,7.2,0v-0.8c-2.2-0.3-5-0.3-7.2,0l0.1-16.2l7.1,0v-0.9h-7c-0.3-1.4-0.3-14.9,0-16.4\n' +
                '\t\tl7,0c0.1-0.1,0.1-0.2,0.2-0.2c0.1,0,0.1-0.2,0.1-0.2c-0.1-0.7,0-0.3-0.3-0.6l-7.1,0l0.1-7.7c-0.4,1.4-0.1,91.2-0.1,97.4\n' +
                '\t\tc0,6.8-0.3,27.3,0.1,32.5l-0.1-34.3L170.4,200.8z"/>\n' +
                '\t<path class="st1" d="M133.2,12.8l-0.9-0.6c1.1-0.9,3.6-1,4.8,0c-0.3,0.6,0.5,0.2-0.7,0.6c1,0.3,6.4,0.6,8.2,0.8\n' +
                '\t\tc2.2,0.3,5.6,1.1,7.6,1.2c-0.6-2.2-4.3-2.4-7.4-2.7c-5.8-0.7-14.2-0.7-20,0c-2.4,0.3-7.5,0.3-7.7,2.7\n' +
                '\t\tC122.6,13.6,132.4,13.1,133.2,12.8z"/>\n' +
                '\t<path class="st1" d="M96.8,57.2c0.2-0.1,0.4-0.4,0.7-0.5c0.9-0.3,0.1-0.7,0.8,0.1c0.7-1,1.2-1,2.6-0.6c-0.8-0.6-0.5-0.3-1.7-0.4\n' +
                '\t\tc1.1-0.6,0.8,0,1.1-1.1c0.9-3.5-3.2-1.5-3.7-1.4c-3.8-0.9-8.7,3.2-6.4,4.9C91.2,59,94.1,57.4,96.8,57.2z"/>\n' +
                '\t<path class="st1" d="M171.1,56.9c0.7-0.9-0.1-0.5,0.8-0.2c0.8,0.3,0.5,0.3,0.6,0.5c2,0.1,5.4,1.8,6.9,1.1c0.9-2-0.6-3.3-1.9-4\n' +
                '\t\tc-0.5-0.3-1.9-0.6-2.4-0.8c-1.5-0.4-1.9-0.1-2.6-0.2c-0.6-0.2-4.2-1.9-3.4,1.4c0.2,0.8,0,0.5,1,1.2c-1.2,0-0.8-0.2-1.6,0.3\n' +
                '\t\tC169.9,55.9,170.4,55.8,171.1,56.9z"/>\n' +
                '\t<path class="st1" d="M170.8,71.5l0.1-2.3l-4.9,2.2l-0.1-1c-0.4,0.9-0.5,2.2-0.5,3.3C166.5,73.1,169.5,71.7,170.8,71.5z"/>\n' +
                '\t<path class="st1" d="M104,73.7c-0.1-1.2-0.1-2.2-0.5-3.1l-0.2,0.8l-4.8-2.2l0.2,2.6c0.4-0.3-0.2-0.5,1.2,0c0.4,0.2,0.9,0.4,1.3,0.6\n' +
                '\t\tC102.2,72.8,103.3,73.3,104,73.7z"/>\n' +
                '\t<path class="st1" d="M106.6,148.2l0-0.8c-2.4-0.2-4.8-0.3-7.2,0.1l0,0.7C101.5,148.6,104.4,148.6,106.6,148.2z"/>\n' +
                '\t<path class="st1" d="M106.6,166.1v-1c-2.4-0.1-4.8-0.3-7.2,0.2v0.7C101.7,166.4,104.2,166.2,106.6,166.1z"/>\n' +
                '\t<path class="st1" d="M99,95.2c0.4-1.5,0.1-2.8,0.1-4.3h-1.6l-0.1,2.2C97.3,94.8,97.3,95.8,99,95.2z"/>\n' +
                '\t<path class="st1" d="M172,93.4l-0.1-2.5l-1.6,0c0,0.9-0.3,3.2,0,3.9C170.8,96.2,172.1,95.7,172,93.4z"/>\n' +
                '\t<path class="st1" d="M106.5,114c0.7-0.5,0.3-0.7,0-1.1l-7.1,0.2v0.8L106.5,114z"/>\n' +
                '\t<polygon class="st1" points="106.5,131.3 106.5,130.3 99.4,130.3 99.4,131.3 \t"/>\n' +
                '\t<path class="st1" d="M106.5,183.5v-1c-2.3,0-4.9-0.3-7.1,0.2l0,0.8L106.5,183.5z"/>\n' +
                '\t<path class="st1" d="M106.5,200.8v-1l-7.1,0.1v0.8C101.6,201,104.2,200.8,106.5,200.8z"/>\n' +
                '\t<path class="st1" d="M133.2,12.8l3.3,0c1.2-0.4,0.3,0,0.7-0.6c-1.2-1-3.7-0.9-4.8,0L133.2,12.8z"/>\n' +
                '</g>\n' +
                '<path class="st2" d="M161.7,244.6v-2.4c-3.4-0.7-9.5,0-13.3,0.2c-8.2,0.5-19.2,0.5-27.5,0.1c-3.6-0.2-10.1-1-13.3-0.3\n' +
                '\tc-0.1,5.8,0.4,4.8,11.9,5.7c14.8,1.1,22.6,0.4,36.8-0.5C159,247.2,161.7,247.2,161.7,244.6z"/>\n' +
                '<path class="st2" d="M106.5,200.8c-2.3,0-4.9,0.2-7.1-0.1v30.2c0,3.2-0.1,6.6,3.6,6.6c3.7,0,3.6-3.4,3.6-6.6\n' +
                '\tC106.6,222.1,106.9,208.6,106.5,200.8z"/>\n' +
                '<polygon class="st2" points="106.5,199.8 106.5,183.5 99.4,183.3 99.4,200 "/>\n' +
                '<path class="st2" d="M106.5,182.4l0-16.3c-2.4,0.1-4.8,0.3-7.2-0.2v16.7C101.6,182.2,104.3,182.4,106.5,182.4z"/>\n' +
                '<path class="st2" d="M106.6,165.1l0-16.9c-2.2,0.4-5.1,0.4-7.2,0l0,17.1C101.7,164.7,104.2,165,106.6,165.1z"/>\n' +
                '<path class="st2" d="M106.6,147.4l0-16l-7.1,0l0,16.2C101.7,147,104.2,147.2,106.6,147.4z"/>\n' +
                '<polygon class="st2" points="106.5,130.3 106.5,114 99.4,113.8 99.4,130.3 "/>\n' +
                '<path class="st2" d="M106.5,112.8c0.2-3.9,1.1-10.5-3.6-10.5c-4.8,0-3.5,6.7-3.6,10.6L106.5,112.8z"/>\n' +
                '<path class="st2" d="M170.4,130.3v-16.4l-7,0c-0.3,1.5-0.3,15.1,0,16.4H170.4z"/>\n' +
                '<path class="st2" d="M170.5,147.4l-0.1-16.2l-7.1,0l-0.1,16.2C165.5,147.1,168.3,147.1,170.5,147.4z"/>\n' +
                '<path class="st2" d="M170.4,165.1l0.1-16.9c-2.2,0.4-5,0.4-7.2,0l0,17C165.6,164.8,168.1,164.9,170.4,165.1z"/>\n' +
                '<path class="st2" d="M170.4,182.5V166c-2.3,0.3-4.8,0.4-7.1-0.1l0,16.6C165.3,182.2,168.4,182.2,170.4,182.5z"/>\n' +
                '<polygon class="st2" points="170.4,199.9 170.4,183.4 163.4,183.3 163.4,199.8 "/>\n' +
                '<path class="st2" d="M170.4,200.8l-7.1,0l0.1,34.3c1.2,4.4,5.6,3.3,6.7,0.9C170.8,234.4,170.5,203.5,170.4,200.8z"/>\n' +
                '<path class="st2" d="M170.4,112.8c0-2.3,0.5-7.6-0.8-9.2c-0.7-0.8-2-1.6-3.6-1.2c-1.6,0.4-2.2,1.2-2.5,2.7l-0.1,7.7L170.4,112.8z"/>\n' +
                '</svg>';
        }else if(ico === "car"){
            svgCode = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n' +
                '\t viewBox="0 0 269.3 269.3" style="enable-background:new 0 0 269.3 269.3;" xml:space="preserve">\n' +
                '<style type="text/css">\n' +
                '\t.st0{fill:none;stroke:#474747;stroke-miterlimit:10;}\n' +
                '\t.st1{fill:' + iColor + ';stroke:#474747;stroke-miterlimit:10;}\n' +
                '\t.st2{fill:#FFFFFF;stroke:#474747;stroke-miterlimit:10;}\n' +
                '</style>\n' +
                '<g id="Layer_x0020_1">\n' +
                '\t<rect class="st0" width="269.3" height="269.3"/>\n' +
                '\t<path class="st1" d="M194.6,191.5V54.9c0-14.1,0.1-23.4-11.2-34.7c-10.3-10.3-20.4-8-37.3-8c-7.3,0-40.9-0.5-45.3,0.3\n' +
                '\t\tC88.9,14.6,80.5,24.3,77,34.4c-3.9,11.1-2.3,30.1-2.3,43.5v136.6c0,16.9-0.6,26.4,10.1,35.7c10.5,9.1,21.5,7,38.3,7\n' +
                '\t\tc8.4,0,40,0.4,45.7-0.1c11.9-1.1,21.9-10.7,24.7-20.5C195.7,229.3,194.6,201,194.6,191.5z"/>\n' +
                '</g>\n' +
                '<path class="st2" d="M135.2,61.4c10.6-0.1,39.5,2.5,47,7.1l-11.6,44.2l-71.7-0.2c-1.6-5.9-11.1-40.9-11.2-44.1\n' +
                '\tC95.1,64.1,124.2,61.5,135.2,61.4z"/>\n' +
                '<path class="st2" d="M80.4,89.3c1.4,2.2,4,10.2,5.1,13.1c3.2,8.4,8.7,19.4,8.6,28.1c0,6,0,12,0,18.1l-13.9-1.8\n' +
                '\tC79.4,142.7,79.8,90.7,80.4,89.3z"/>\n' +
                '<path class="st2" d="M80,209.5l0.1-53.5l13.7,1.6c0.8,2.9,0.7,38.2,0.2,42.7C93.1,201.3,81.8,209.1,80,209.5z"/>\n' +
                '<path class="st2" d="M88.5,225.1c0.2-1.4,9.6-14.6,11.3-17.3l71.7,0.1c2,3.1,10.6,15.1,11,17.4L88.5,225.1z"/>\n' +
                '<path class="st2" d="M189.5,208.1l-14-9.4l0.1-40.9c3.2-0.7,10.9-2,14.1-1.7L189.5,208.1z"/>\n' +
                '<path class="st2" d="M189.3,146.6c-1.8,1.2-10.9,2.1-13.7,1.9c-0.6-5.3-0.1-13.4-0.1-19c0-7.8,1.1-8.8,3.5-15\n' +
                '\tc2.1-5.4,8.6-24,10.4-27.4C189.9,88.2,190.3,145.5,189.3,146.6z"/>\n' +
                '</svg>';
        }else{
            svgCode = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" style="" xml:space="preserve" width="49.636" height="49.636"><rect id="backgroundrect" width="100%" height="100%" x="0" y="0" fill="none" stroke="none"/> <g class="currentLayer" style=""><title>Layer 1</title><polygon style="" points="23.164264678955078,36.56473159790039 0.16326522827148438,32.7097282409668 49.79926681518555,9.929727554321289 25.79926300048828,58.34572982788086" id="svg_1" class="" transform="rotate(-44.91157150268555 24.981266021728523,34.13772583007813) " fill="' + iColor + '" fill-opacity="1"/><g id="svg_2" class=""> </g><g id="svg_3" class=""> </g><g id="svg_4" class=""> </g><g id="svg_5" class=""></g><g id="svg_6" class=""></g><g id="svg_7" class=""></g><g id="svg_8" class=""></g><g id="svg_9" class=""></g><g id="svg_10" class=""></g><g id="svg_11" class=""></g><g id="svg_12" class=""></g><g id="svg_13" class=""></g><g id="svg_14" class=""></g><g id="svg_15" class=""></g><g id="svg_16" class=""></g></g></svg>';
        }
        return svgCode;
    };

	$rootScope.trackLive = function(device){
        if(device.status === 'inactive' || device.status === 'offline'){
            swal('This Device is Inactive/offline.');
        }else{
            $rootScope.selectedDevicekGlobalData = device;
            $rootScope.redirect('/#!/mains/mapZoom/'+ device.imei);
        }
    };

    $rootScope.allocAllDevice = function(){
        $rootScope.aDevice = [];
        angular.forEach($rootScope.selectedUser.devices, function(device, key) {
            $rootScope.aDevice.push(device);
        });
        var modalInstance = $uibModal.open({
            templateUrl : 'views/user/allocate-device.html',
            controller : 'allocateDeviceCtrl'
        });
    };

    $rootScope.edtDevice = function(device){

        var modalInstance = $uibModal.open({
            templateUrl : 'views/user/edit-device.html',
            controller : 'editDeviceCtrl'
        });
        if(device && device.sos_nos) {
            device.sos_nos = device.sos_nos.map((item) => parseInt(item) );
        }
        $rootScope.sDevice = device;
    };

    $rootScope.allocDevice = function(aDevice){
        var modalInstance = $uibModal.open({
            templateUrl : 'views/user/allocate-device.html',
            controller : 'allocateDeviceCtrl'
        });
        $rootScope.aDevice = aDevice;
    };

    $rootScope.allocateDevice = function(){
        $rootScope.aDevice = [];
        // angular.forEach($rootScope.selectedUser.devices, function(device, key) {
        //     if(device.selected) {
        //         $rootScope.aDevice.push(device);
        //     }
        // });
        for(let i=0; i<$rootScope.aMyTrSheetDevice.length; i++){
            if($rootScope.aMyTrSheetDevice[i].selected){
                $rootScope.aDevice.push($rootScope.aMyTrSheetDevice[i]);
            }
        }

        if($rootScope.aDevice && $rootScope.aDevice.length>0) {
            var modalInstance = $uibModal.open({
                templateUrl: 'views/user/allocate-device.html',
                controller: 'allocateDeviceCtrl'
            });
        }else {
            swal('warning','Please select device first.','warning');
        }
    };

    $rootScope.addVehicle = function(){
        var modalInstance = $uibModal.open({
            templateUrl : 'views/user/addVehiclefromPull.html',
            controller : 'addVehiclefromPullCtrl'
        });
    };

    $rootScope.commands = function (device) {
        if (device.status !== 'inactive') {
            $rootScope.commDevice = device;
            var modalInstance = $uibModal.open({
                templateUrl: 'views/command/command-pop.html',
                controller: 'commandCtrl'
            });
        } else {
            swal('This Device is Inactive.');
        }
    }

    $rootScope.homePage = function () {
        $rootScope.redirect('/#!/main/user');
    };

    utils.getLandmarkForMultiLayer = function (centerPoint) {

        return new Promise(getAllLandmark);

        function getAllLandmark(resolve, reject) {
            function landListResponse(response) {
                response = JSON.parse(response);
                var aMarkers = generateMarker(response.status === 'OK' ? response.data.data : []);
                resolve(aMarkers);
            }

            var landList = {};
            landList.user_id = $localStorage.user.user_id;
            landList.request = 'get_nearest_landmark_for_point';
            landList.lat = centerPoint.lat;
            landList.lng = centerPoint.lng;
            landList.radius = 10000;
            GoogleMapService.getLandmarkForMultiLayer(landList, landListResponse);
        }

        function generateMarker(aLandmark) {
            var aFilteredLandmark = haveLatLng(aLandmark);
            return setMarkers(aFilteredLandmark);
        }

        function haveLatLng(aLatLng) {
            var ahaveLatLng = [];
            for (var i = 0; i < aLatLng.length; i++){
                if(aLatLng[i].location && aLatLng[i].location.latitude && aLatLng[i].location.longitude) {
                    ahaveLatLng.push(aLatLng[i]);
                }
            }
            return ahaveLatLng;
        }
        function setMarkers(aMarker) {
            if(aMarker && aMarker.length>0){
                var markerList = [];
                for (var i = 0; i < aMarker.length; i++) {
                    var a = aMarker[i];
                    var title = a.name;
                    var marker = L.marker([a.location.latitude, a.location.longitude], a).bindTooltip(title,{permanent:false,direction:'top'}).openTooltip();
                    marker.data = aMarker[i];
                    markerList.push(marker);
                }
                return markerList;
            }
        }
    };

    utils.getGeozoneForMultiLayer = function (centerPoint) {

        var geozones = [];
        return new Promise(getAllGeozone);

        function getAllGeozone(resolve) {
            function geoZoneListResponse(response) {
                response = JSON.parse(response);
                var aMultGeoZone = generateMarker(response.status === 'OK' ? response.data.data : []);
                resolve(aMultGeoZone);
            }

            var geoList = {};
            geoList.user_id = $localStorage.user.user_id;
            geoList.request = 'get_nearest_geofence_for_point';
            geoList.lat = centerPoint.lat;
            geoList.lng = centerPoint.lng;
            geoList.radius = 10000;
            GoogleMapService.getGeozoneForMultiLayer(geoList, geoZoneListResponse);
        }

        function getLatLongInArray(aLatLng) {
            var aData = [];
            if(aLatLng && aLatLng.length>0){
                for (var i=0; i<aLatLng.length; i++){
                    aData.push([aLatLng[i].latitude,aLatLng[i].longitude])
                }
            }
            return aData;
        }

        function setLayerData(mapData) {
            var layerType = mapData.ptype;
            if (layerType === 'circle') {
                var latlngs = getLatLongInArray(mapData.geozone);
                var circle = L.circle(latlngs[0], {color: 'orange',radius: (mapData.radius || 0)});
                // zoom the map to the polygon
                //map.fitBounds(circle.getBounds());
                circle.bindPopup(mapData.name);
                geozones.push(circle);

            } else if (layerType === 'rectangle') {
                var latlngs = getLatLongInArray(mapData.geozone);
                var rect = L.rectangle(latlngs, {color: 'blue'});
                // zoom the map to the polygon
                //map.fitBounds(rect.getBounds());
                rect.bindPopup(mapData.name);
                geozones.push(rect);

            } else if (layerType === 'polygon') {
                var latlngs = getLatLongInArray(mapData.geozone);
                var poly = L.polygon(latlngs, {color: 'green'});
                // zoom the map to the polygon
                //map.fitBounds(poly.getBounds());
                poly.bindPopup(mapData.name);
                geozones.push(poly);
            }
        }

        function generateMarker(aGeoZone) {
            if(aGeoZone && aGeoZone.length>0){
                for (var x=0; x<aGeoZone.length;x++){
                    setLayerData(aGeoZone[x]);
                }
            }
            return geozones;
            //let aFilteredLandmark = haveLatLng(aGeoZone);
            //return setMarkers(aFilteredLandmark);
        }
    };

    utils.getVehicleForMultiLayer = function (centerPoint) {

        return new Promise(getNearestVehicle);

        function getNearestVehicle(resolve, reject) {
            function nearestVehicleResponse(response) {
                response = JSON.parse(response);
                var aMarkers = generateMarker(response.status === 'OK' ? response.data.data : []);
                resolve(aMarkers);
            }

            var nearestVehicle = {};
            nearestVehicle.user_id = $localStorage.user.user_id;
            nearestVehicle.request = 'get_nearest_vehicle_for_point';
            nearestVehicle.lat = centerPoint.lat;
            nearestVehicle.lng = centerPoint.lng;
            nearestVehicle.radius = 10000;
            GoogleMapService.getVehicleForMultiLayer(nearestVehicle, nearestVehicleResponse);
        }

        function generateMarker(aLandmark) {
            var aFilteredLandmark = haveLatLng(aLandmark);
            return setMarkers(aFilteredLandmark);
        }

        function haveLatLng(aLatLng) {
            var ahaveLatLng = [];
            for (var i = 0; i < aLatLng.length; i++){
                if(aLatLng[i].lat && aLatLng[i].lng) {
                    ahaveLatLng.push(aLatLng[i]);
                }
            }
            return ahaveLatLng;
        }
        function setMarkers(aMarker) {
            if(aMarker && aMarker.length>0){
                var markerList = [];
                for (var i = 0; i < aMarker.length; i++) {
                    var a = aMarker[i];
                    var title = a.reg_no;
                    var marker = L.marker([a.lat, a.lng], a).bindTooltip(title,{permanent:false,direction:'top'}).openTooltip();
                    marker.setIcon(L.icon({
                        iconUrl: getSVG(a.status, a.icon),
                        iconSize: [21, 32]
                    }));
                    marker.data = aMarker[i];
                    markerList.push(marker);
                }
                return markerList;
            }
        }
    };

    return utils;
});

materialAdmin.filter('takeIcon',function (utils) {
    return function (p1,p2) {
        if(typeof p1 === 'undefined' || typeof p2 === 'undefined')
            return false;

        var color = utils.setColor[p2];
        return 'data:image/svg+xml;charset=UTF-8;base64, ' + btoa(utils.takeIcon(p1, color));
    }
});
